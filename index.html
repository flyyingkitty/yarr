<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SECURE ACCESS TERMINAL</title>
    <style>
        body {
            font-family: Arial, Helvetica, sans-serif; /* Standard sans-serif */
            background-color: #e0e0e0; /* Light grey, typical old UI */
            color: #000000; /* Black text */
            margin: 0;
            padding: 10px;
            line-height: 1.5;
            font-size: 14px; /* Standard readable size */
        }

        /* Initial Password Overlay */
        .password-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #c0c0c0; /* Solid grey overlay */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
            box-sizing: border-box;
            border: 5px solid #808080;
        }

        .password-overlay h2,
        .password-modal-content h3 {
            color: #000000;
            margin-bottom: 15px;
            text-transform: uppercase;
            border-bottom: 2px solid #000000;
            padding-bottom: 5px;
            font-size: 1.2em;
            font-weight: bold;
        }
        .password-modal-content h3 {
             font-size: 1.1em;
        }


        .password-overlay input[type="password"],
        .password-modal input[type="password"] {
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #333333;
            background-color: #ffffff;
            color: #000000;
            font-family: monospace; /* System monospace */
            font-size: 1em;
            width: 250px;
            box-shadow: inset 1px 1px 2px #888; /* Simple inset shadow */
        }
        .password-overlay input[type="password"]:focus,
        .password-modal input[type="password"]:focus {
            outline: 1px solid #000080; /* Simple outline */
            background-color: #f0f8ff; /* Light blue on focus */
        }

        .password-overlay button,
        .password-modal button {
            padding: 8px 15px;
            background-color: #b0b0b0; /* Grey button */
            color: #000000;
            border: 1px outset #808080; /* Classic button border */
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
        }
        .password-overlay button:hover,
        .password-modal button:hover {
            background-color: #a0a0a0;
        }
        .password-overlay button:active,
        .password-modal button:active {
            border-style: inset;
        }


        .password-error {
            color: #cc0000; /* Standard red */
            margin-top: 10px;
            font-size: 0.9em;
            font-weight: bold;
        }

        /* Main Content Area */
        .main-content {
            display: none;
            padding: 15px;
            max-width: 800px; /* Slightly narrower for older feel */
            margin: 20px auto;
            border: 2px solid #000000; /* Stark black border */
            background-color: #f0f0f0; /* Lighter grey for content */
        }

        .classification-header {
            background-color: #800000; /* Dark red */
            color: #ffffff;
            padding: 5px 10px;
            font-weight: bold;
            text-align: center;
            font-size: 1.1em;
            letter-spacing: 1px;
            margin: -15px -15px 20px -15px; /* Full width header */
            border-bottom: 2px solid #000000;
            font-family: "Courier New", Courier, monospace;
        }
        .classification-header.bottom {
            margin: 20px -15px -15px -15px;
            border-top: 2px solid #000000;
            border-bottom: none;
        }

        .document-header {
            border-bottom: 1px solid #808080;
            padding-bottom: 10px;
            margin-bottom: 15px;
            font-family: "Courier New", Courier, monospace;
            font-size: 0.9em;
        }
        .document-header p {
            margin: 4px 0;
        }
        .document-header strong {
            display: inline-block;
            width: 100px;
            color: #333333;
            font-weight: bold;
        }

        .message-body h3 {
            color: #000000;
            border-bottom: 1px solid #808080;
            padding-bottom: 5px;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1em;
            font-weight: bold;
        }
        .message-body p, .message-body ul, .message-body ol {
            margin-bottom: 12px;
            font-size: 0.95em;
        }
        .message-body ul {
            padding-left: 20px;
            list-style-type: square; /* More basic list style */
        }
        .message-body ol {
            padding-left: 25px;
        }

        .action-buttons-container {
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid #808080;
            text-align: left; /* Buttons aligned left */
        }
        .action-buttons-container button.action-btn {
            background-color: #d3d3d3;
            color: #000000;
            border: 1px solid #505050;
            padding: 6px 10px;
            margin: 5px 5px 5px 0;
            cursor: pointer;
            font-size: 0.85em;
            text-transform: none; /* No uppercase */
            font-weight: normal;
        }
        .action-buttons-container button.action-btn:hover {
            background-color: #c0c0c0;
        }

        /* Password Modal for Action Buttons */
        .password-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(128, 128, 128, 0.7); /* Semi-transparent grey */
            justify-content: center;
            align-items: center;
            z-index: 900;
            padding: 20px;
            box-sizing: border-box;
        }
        .password-modal-content {
            background-color: #e0e0e0;
            padding: 20px;
            border: 2px solid #000000;
            text-align: center;
            position: relative;
            width: 400px; /* Fixed width modal */
        }
        .close-modal-btn {
            position: absolute;
            top: 5px;
            right: 8px;
            font-size: 1.2em;
            font-family: "Courier New", Courier, monospace;
            font-weight: bold;
            color: #000000;
            background: none;
            border: none;
            cursor: pointer;
        }
        .close-modal-btn:hover {
            color: #cc0000;
        }


        /* Hidden Info Sections */
        .info-section {
            display: none;
            margin-top: 20px;
            padding: 10px;
            border: 1px dashed #505050;
            background-color: #e8e8e8;
        }
        .info-section h4 {
            color: #000080; /* Dark blue for sub-headers */
            margin-top: 0;
            border-bottom: 1px solid #000080;
            padding-bottom: 5px;
            font-size: 1em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .info-section pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            background-color: #f8f8f8; /* Very light grey for pre */
            padding: 8px;
            border: 1px solid #808080;
            max-height: 180px;
            overflow-y: auto;
            font-size: 0.85em;
            font-family: "Courier New", Courier, monospace;
            line-height: 1.4;
        }
        .info-section table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
            font-size: 0.9em;
        }
        .info-section th, .info-section td {
            border: 1px solid #505050;
            padding: 5px;
            text-align: left;
        }
        .info-section th {
            background-color: #c0c0c0;
            font-weight: bold;
        }

        /* Utility */
        .text-red { color: #b30000; font-weight: bold; }
        .text-yellow { color: #996600; font-weight: bold; }
        .text-green { color: #006400; font-weight: bold; }

        /* START OF NEW CSS - DO NOT MODIFY CSS ABOVE THIS LINE */
        .agreement-container {
            margin-top: 15px;
            margin-bottom: 10px; /* Space before submit button */
            font-size: 0.85em;
            text-align: left;
            width: 270px; /* To roughly match password input width + some margin */
        }
        .agreement-container input[type="checkbox"] {
            margin-right: 5px;
            vertical-align: middle;
        }
        .agreement-container label {
            vertical-align: middle;
        }
        .view-agreement-link {
            color: #000080; /* Dark blue link */
            text-decoration: underline;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 5px;
        }
        .view-agreement-link:hover {
            color: #0000cc;
        }

        .legal-terms-modal-overlay {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(100, 100, 100, 0.6); /* Semi-transparent darker grey */
            justify-content: center;
            align-items: center;
            z-index: 1001; /* Above password overlay */
            padding: 20px;
            box-sizing: border-box;
        }
        .legal-terms-modal-content {
            background-color: #f0f0f0;
            padding: 20px;
            border: 2px solid #000000;
            width: 90%;
            max-width: 600px;
            height: 70%;
            max-height: 500px;
            display: flex;
            flex-direction: column;
        }
        .legal-terms-modal-content h3 {
            color: #000000;
            margin-top: 0;
            margin-bottom: 10px;
            text-transform: uppercase;
            border-bottom: 1px solid #000000;
            padding-bottom: 5px;
            font-size: 1.1em;
        }
        .legal-terms-text-area {
            flex-grow: 1;
            overflow-y: auto;
            border: 1px solid #808080;
            padding: 10px;
            background-color: #ffffff;
            font-family: "Times New Roman", Times, serif; /* More formal/legal font */
            font-size: 0.9em;
            line-height: 1.4;
            margin-bottom: 15px;
        }
        .legal-terms-modal-content button {
            padding: 8px 15px;
            background-color: #b0b0b0;
            color: #000000;
            border: 1px outset #808080;
            cursor: pointer;
            font-weight: bold;
            align-self: center;
        }
        .legal-terms-modal-content button:hover {
            background-color: #a0a0a0;
        }
        /* END OF NEW CSS - DO NOT MODIFY CSS BELOW THIS LINE */

    </style>
</head>
<body>

    <div class="password-overlay" id="initialPasswordOverlay">
        <h2>SYSTEM LOGIN</h2>
        <p style="color: #333; margin-bottom:15px; text-align:center; font-size:0.9em;">Enter Authentication Code.</p>
        <input type="password" id="initialPasswordInput" placeholder="CODE">
        
        <!-- START OF NEW HTML - DO NOT MODIFY HTML OUTSIDE THIS BLOCK -->
        <div class="agreement-container">
            <input type="checkbox" id="agreementCheckbox">
            <label for="agreementCheckbox">I acknowledge and agree to the
                <span class="view-agreement-link" id="viewAgreementBtn">terms of use</span>.
            </label>
        </div>
        <!-- END OF NEW HTML -->

        <button onclick="checkInitialPassword()" id="initialSubmitButton">SUBMIT</button>
        <p class="password-error" id="initialPasswordError"></p>
    </div>

    <div class="main-content" id="mainContentArea">
        <div class="classification-header">TOP SECRET // SI-GAMMA // EYES ONLY</div>

        <div class="document-header">
            <p><strong>FROM:</strong> OPS DIR, TASK GROUP 7.3</p>
            <p><strong>TO:</strong> JNT STAFF LNO (CODE S-2)</p>
            <p><strong>DATE:</strong> <span id="currentDate"></span></p>
            <p><strong>SUBJECT:</strong> URGENT REPORT: ANOMALOUS CONTACT DESIGNATION XA-441B</p>
            <p><strong>MSG ID:</strong> TG73-RPT-004-24</p>
        </div>

        <div class="message-body">
            <h3>1. SITUATION REPORT</h3>
            <p>This report details initial findings concerning Unidentified Maritime/Subsurface Contact (UMSC) XA-441B, detected 03:17Z 19 JUL 2024, Sector DELTA-9 (Grid Ref: Encrypted Annex). Contact identified via anomalous gravimetric displacement and multi-spectrum EM variance. Restricted Access Zone (RAZ) DELTA established T+4H of detection.</p>
            <p>Remote observation confirms XA-441B is an artificial construct of unknown, presumed non-terrestrial, origin.</p>

            <h3>2. CONTACT XA-441B: OBSERVATIONAL DATA (PRELIM)</h3>
            <ul>
                <li><strong>Configuration:</strong> Irregular flattened ovoid. Approx. dimensions: 27m (L) x 11m (W). Surface non-reflective, appears seamless. No visible propulsion or external features detected.</li>
                <li><strong>Material Scan (Stand-off):</strong> Primary structure composed of an unknown metallic alloy with high elemental density. Isotopic ratios inconsistent with Sol system norms. Ref: Tech Annex 1A.</li>
                <li><strong>Energy Output:</strong> Continuous low-level emission of neutrinos and high-frequency particle radiation. Internal power source output estimated to significantly exceed current terrestrial capabilities.</li>
                <li><strong>Status:</strong> Contact appears inert. No active transmissions or biological signatures detected.</li>
            </ul>

            <h3>3. ASSESSMENT AND IMPLICATIONS</h3>
            <p>The confirmed presence of XA-441B constitutes a significant intelligence event with major national security implications. Potential consequences include:</p>
            <ul>
                <li>Confirmation of advanced non-human technological presence.</li>
                <li>Potential for significant technological gain or emergent threat vector, dependent on contact's origin and intent.</li>
                <li>Requirement for immediate review of current defense posture and contingency protocols.</li>
            </ul>

            <h3>4. RECOMMENDED ACTIONS</h3>
            <p>Based on current information, the following actions are directed:</p>
            <ol>
                <li>Implement INFOSEC PROTOCOL RED (Full Spectrum Information Control).</li>
                <li>Enhance surveillance and security of RAZ DELTA.</li>
                <li>Develop phased plan for detailed study of XA-441B, prioritizing non-invasive methods.</li>
                <li>Brief designated Allied liaisons per AGREEMENT SIERRA-TANGO, under strict compartmentation.</li>
                <li>Review and update CONTINGENCY PLAN ZULU-7 (Anomalous Contact Response).</li>
            </ol>
            <p class="text-red"><strong>WARNING: This information is classified TOP SECRET//SI-GAMMA. Unauthorized disclosure is a violation of federal law and will be prosecuted.</strong></p>
        </div>

        <div class="action-buttons-container">
            <button class="action-btn" data-infoid="xr73Analysis">View Tech Annex 1A (Material)</button>
            <button class="action-btn" data-infoid="commsLogs">View Comm Log Excerpt</button>
            <button class="action-btn" data-infoid="contingencyProtocol">View Zulu-7 Protocol Summary</button>
            <button class="action-btn" data-infoid="decemberDirective">View Directive 07-ALPHA</button>
        </div>

        <!-- Hidden Info Sections -->
        <div class="info-section" id="info-xr73Analysis">
            <h4>Tech Annex 1A: XA-441B Material Scan (Summary)</h4>
            <p>Stand-off Spectroscopic Analysis (SSA) of XA-441B outer hull:</p>
            <table>
                <thead>
                    <tr>
                        <th>Component</th>
                        <th>Est. %</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Metallic Alloy (Type IV-Unknown)</td>
                        <td>~68%</td>
                        <td class="text-yellow">Novel crystal structure. High density.</td>
                    </tr>
                    <tr>
                        <td>Ceramic-Polymer Composite</td>
                        <td>~20%</td>
                        <td>Possible EM dampening.</td>
                    </tr>
                    <tr>
                        <td>Element Z-Prime (Isotope Group)</td>
                        <td>~9%</td>
                        <td class="text-red">Theoretically unstable. Suggests advanced field containment.</td>
                    </tr>
                    <tr>
                        <td>Trace Organics</td>
                        <td><2%</td>
                        <td>Undetermined.</td>
                    </tr>
                </tbody>
            </table>
            <p><strong>Energy Notes:</strong> Gravimetric readings indicate non-uniform internal mass, likely complex systems. Neutrino flux pattern currently under analysis.</p>
        </div>

        <div class="info-section" id="info-commsLogs">
            <h4>Comm Log Excerpt: XA-441B Interaction Test (Protocol BEACON-3)</h4>
            <pre>
DTG: 200800Z JUL 24
  TEST 01: RF Pulse (1-10GHz Prime Seq.)
  RESULT: NEGATIVE RESPONSE. SIG UNCHANGED.
---
DTG: 201430Z JUL 24
  TEST 02: Optical Tx (1550nm Math Const.)
  RESULT: NEGATIVE RESPONSE. LOCALIZED ABSORPTION NOTED.
---
DTG: 210215Z JUL 24
  TEST 03: Sub-Aquatic Sonar (10-500Hz Var.)
  RESULT: <span class="text-yellow">ANOMALY:</span> TRANSIENT RESONANCE AT 188.3HZ. MINOR NEUTRINO SPIKE. NO COMMS.
---
[TESTING SUSPENDED PER DIR 07-ALPHA]
            </pre>
        </div>

        <div class="info-section" id="info-contingencyProtocol">
            <h4>Contingency Plan ZULU-7 (XA-441B) - Summary</h4>
            <p>Response levels for XA-441B status changes:</p>
            <ul>
                <li><strong>LEVEL 4 (Info Breach):</strong> INFOSEC PROTOCOL BLACK. Counter-intel ops.</li>
                <li><strong>LEVEL 3 (Activation - Non-Hostile):</strong> RAZ DELTA heightened alert. Monitor. Attempt contact (PROTOCOL BEACON-3 REV B).</li>
                <li><strong>LEVEL 2 (Activation - Ambiguous/Threat):</strong> QRF deployment. Prep EVAC ORDER BRAVO. Non-lethal deterrents authorized.</li>
                <li><strong>LEVEL 1 (Hostile Action):</strong> Full engagement authority. DEFCON protocols apply.</li>
            </ul>
            <p class="text-red"><strong>ZULU-7 subject to revision.</strong></p>
        </div>

        <div class="info-section" id="info-decemberDirective">
            <h4>Directive 07-ALPHA: Task Group 7.3 Operational Mandate (XA-441B)</h4>
            <p>Effective Immediately.</p>
            <ol>
                <li><strong>Secrecy:</strong> TOP SECRET//SI-GAMMA classification is paramount.</li>
                <li><strong>Scientific Team:</strong> Form Joint Analysis Group (JAG) for XA-441B study. Non-invasive methods prioritized.</li>
                <li><strong>Defense Posture:</strong> Expedite PROJECT AEGIS upgrades.</li>
                <li><strong>Allied Liaison:</strong> Brief AGREEMENT SIERRA-TANGO partners via secure channels.</li>
                <li><strong>Resources:</strong> Task Group 7.3 assigned Priority Alpha for resources.</li>
                <li><strong>Comms Moratorium:</strong> Suspend active signaling pending JAG assessment.</li>
            </ol>
            <p class="text-yellow"><strong>This directive is binding.</strong></p>
            <p>AUTHORIZED: [REDACTED]</p>
        </div>


        <div class="classification-header bottom">TOP SECRET // SI-GAMMA // EYES ONLY</div>
    </div>

    <!-- Password Modal for Action Buttons -->
    <div class="password-modal" id="actionPasswordModal">
        <div class="password-modal-content">
            <button class="close-modal-btn" onclick="closeActionPasswordModal()">X</button>
            <h3>Annex Access</h3>
            <p style="color: #333; margin-bottom:15px; font-size:0.9em;">Enter Operational Code.</p>
            <input type="password" id="actionPasswordInput" placeholder="CODE">
            <button onclick="checkActionPassword()">Access</button>
            <p class="password-error" id="actionPasswordError"></p>
        </div>
    </div>

    <!-- START OF NEW HTML - DO NOT MODIFY HTML OUTSIDE THIS BLOCK -->
    <div class="legal-terms-modal-overlay" id="legalTermsModal">
        <div class="legal-terms-modal-content">
            <h3>TERMS OF SYSTEM ACCESS & DATA HANDLING</h3>
            <div class="legal-terms-text-area" id="legalTermsTextArea">
                <p><strong>NOTICE TO ALL PERSONNEL ACCESSING THIS SYSTEM:</strong></p>
                <p>By proceeding beyond this point and accessing any data contained within this system ("System"), you ("User") hereby acknowledge, understand, and expressly agree to the following terms and conditions. Failure to comply with these terms may result in severe administrative, civil, and/or criminal penalties, including but not limited to termination of access, employment termination, fines, and imprisonment under applicable federal and international law.</p>
                <p><strong>1. CLASSIFICATION AND HANDLING:</strong> All information contained within or accessed through this System is classified at a minimum level of TOP SECRET//SI-GAMMA or higher, unless explicitly marked otherwise. User agrees to handle all such information in strict accordance with U.S. Government regulations, agency-specific directives (including but not limited to Directive 00-ALPHA-SECURITY), and all relevant non-disclosure agreements (NDAs) signed by the User. No information may be copied, transmitted, discussed, or removed from authorized secure facilities or networks without explicit, written authorization from the designated cognizant security authority (CSA).</p>
                <p><strong>2. AUTHORIZED USE ONLY:</strong> Access to this System is granted solely for official U.S. Government duties as authorized by User's direct chain of command and validated security clearance. Any access or attempted access for personal use, unauthorized research, or any purpose not directly related to assigned official duties is strictly prohibited and will be logged and investigated.</p>
                <p><strong>3. MONITORING AND AUDIT:</strong> User acknowledges that all activities on this System, including keystrokes, data access, file transfers, and communication attempts, are subject to continuous monitoring, recording, and auditing by authorized U.S. Government personnel without further notice. This monitoring is conducted for purposes of system security, maintenance, law enforcement, counterintelligence, and to ensure compliance with all applicable regulations and policies. There is no expectation of privacy when using this System.</p>
                <p><strong>4. DATA INTEGRITY AND SECURITY INCIDENTS:</strong> User is responsible for maintaining the integrity and security of all data accessed. Any suspected or actual security incident, data spillage, unauthorized disclosure, or suspicious activity must be reported IMMEDIATELY to the System Security Officer (SSO) or the designated incident response team through established reporting channels.</p>
                <p><strong>5. NON-DISCLOSURE OBLIGATION:</strong> The obligation to protect classified information accessed through this System extends indefinitely, even after termination of User's access, employment, or affiliation with the U.S. Government. User agrees never to disclose, publish, or disseminate any classified information to any unauthorized person or entity.</p>
                <p><strong>6. CONSENT TO JURISDICTION:</strong> User consents to the jurisdiction of U.S. federal courts for any action arising from or related to the use of this System or the handling of information obtained therefrom.</p>
                <p><strong>7. ACKNOWLEDGEMENT OF UNDERSTANDING:</strong> By checking the "I acknowledge and agree" box and proceeding with authentication, User affirms that they have read, understood, and consent to be legally bound by these Terms of System Access & Data Handling. User further affirms that they possess the requisite security clearance and need-to-know for the information they are attempting to access.</p>
                <p>FAILURE TO ADHERE TO THESE TERMS CONSTITUTES A SERIOUS SECURITY VIOLATION.</p>
                <hr>
                <p style="font-size:0.8em; text-align:center;">Document Version: TOS-SYS-1.7.3 REV B - Last Updated: 2023-11-01</p>
            </div>
            <button id="closeLegalTermsBtn">CLOSE</button>
        </div>
    </div>
    <!-- END OF NEW HTML -->


    <script>
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('en-GB'); // DD/MM/YYYY

        const initialPasswordOverlay = document.getElementById('initialPasswordOverlay');
        const initialPasswordInput = document.getElementById('initialPasswordInput');
        const initialPasswordError = document.getElementById('initialPasswordError');
        const mainContentArea = document.getElementById('mainContentArea');

        const actionPasswordModal = document.getElementById('actionPasswordModal');
        const actionPasswordInput = document.getElementById('actionPasswordInput');
        const actionPasswordError = document.getElementById('actionPasswordError');
        
        let currentInfoSectionId = null;

        function checkInitialPassword() {
            // START OF MODIFIED JS - DO NOT MODIFY JS OUTSIDE THIS FUNCTION (unless it's the new event listeners below)
            if (!document.getElementById('agreementCheckbox').checked) {
                initialPasswordError.textContent = 'YOU MUST AGREE TO THE TERMS OF USE.';
                return;
            }
            // END OF MODIFIED JS

            if (initialPasswordInput.value === "sacred") {
                initialPasswordOverlay.style.display = 'none';
                mainContentArea.style.display = 'block';
                initialPasswordError.textContent = '';
            } else {
                initialPasswordError.textContent = 'AUTHENTICATION FAILED.';
                initialPasswordInput.value = '';
            }
        }
        initialPasswordInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                checkInitialPassword();
            }
        });

        const actionButtons = document.querySelectorAll('.action-btn');
        actionButtons.forEach(button => {
            button.addEventListener('click', function() {
                currentInfoSectionId = this.dataset.infoid;
                document.querySelectorAll('.info-section').forEach(sec => sec.style.display = 'none');
                
                actionPasswordModal.style.display = 'flex';
                actionPasswordInput.value = '';
                actionPasswordError.textContent = '';
                actionPasswordInput.focus();
            });
        });

        function closeActionPasswordModal() {
            actionPasswordModal.style.display = 'none';
            currentInfoSectionId = null;
        }

        function checkActionPassword() {
            if (actionPasswordInput.value === "secret") {
                actionPasswordModal.style.display = 'none';
                actionPasswordError.textContent = '';
                if (currentInfoSectionId) {
                    const sectionToOpen = document.getElementById('info-' + currentInfoSectionId);
                    if (sectionToOpen) {
                        sectionToOpen.style.display = 'block';
                        sectionToOpen.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            } else {
                actionPasswordError.textContent = 'INVALID CODE. ACCESS DENIED.';
                actionPasswordInput.value = '';
            }
        }
        actionPasswordInput.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                checkActionPassword();
            }
        });

        // START OF NEW JAVASCRIPT - DO NOT MODIFY JS ABOVE THIS LINE (except the one line in checkInitialPassword)
        const agreementCheckbox = document.getElementById('agreementCheckbox');
        const initialSubmitButton = document.getElementById('initialSubmitButton');
        const viewAgreementBtn = document.getElementById('viewAgreementBtn');
        const legalTermsModal = document.getElementById('legalTermsModal');
        const closeLegalTermsBtn = document.getElementById('closeLegalTermsBtn');

        // Initially disable submit button
        initialSubmitButton.disabled = true;
        initialSubmitButton.style.backgroundColor = '#d0d0d0'; // Visually indicate disabled
        initialSubmitButton.style.cursor = 'not-allowed';


        agreementCheckbox.addEventListener('change', function() {
            if (this.checked) {
                initialSubmitButton.disabled = false;
                initialSubmitButton.style.backgroundColor = '#b0b0b0';
                initialSubmitButton.style.cursor = 'pointer';
                initialPasswordError.textContent = ''; // Clear previous error if agreement was the issue
            } else {
                initialSubmitButton.disabled = true;
                initialSubmitButton.style.backgroundColor = '#d0d0d0';
                initialSubmitButton.style.cursor = 'not-allowed';
            }
        });

        viewAgreementBtn.addEventListener('click', function(event) {
            event.preventDefault(); // Prevent any default span action
            legalTermsModal.style.display = 'flex';
        });

        closeLegalTermsBtn.addEventListener('click', function() {
            legalTermsModal.style.display = 'none';
        });
        
        // Close modal if clicking outside the content (on the overlay)
        legalTermsModal.addEventListener('click', function(event) {
            if (event.target === legalTermsModal) {
                legalTermsModal.style.display = 'none';
            }
        });
        // END OF NEW JAVASCRIPT
    </script>

</body>
</html>
